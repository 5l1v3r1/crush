Todo:
the for command should not be limited to loops, and it should be possible to name the entire row, e.g. for i={ls} `{val $i}
Type literals, e.g. type{integer}
Add a command for picking a single field off a struct, e.g. struct foo=bar | field %foo
Add system tests for type casting
Add system tests for for loop
Add system tests for binary stream handling
Add system tests for structs
Add system tests for dealing with tables as streams
Fix aggr command and think through it's input/output types
Rename list -> MutableList
Create new type ImmutableList
Rename dict -> MutableDict
Create new type ImmutableDict
Rename text -> string
Create str namespace with string commands like upper, lower
Flesh out time/duration modes with add/subtract support
Make better to_string methods for various cell types
Some missing comparisons on Cell
Missing some cell type serilisations and deserialisations
Namespace literal
Make names mandatory and unique for struct fields
implement file regexps
make ls support regexps
implement input type declarations for closures
Add support for %<INTEGER> for offset based field identifiers
make file globing testable via fakes
Error source propagation
help command
implement cmd command
implement format command for text formating
add parens to filter command
Implement loop command
Implement break/continue commands
The readline command reads interactive text input from the user via the terminal
pbuf command that takes a protobuf definition and uses it to deserialize protobuf data
avro command that deserializes avro data
toml command that deserializes toml data
Rename JobError -> CrushError
Add Kind to CrushError
Deal with different error kinds differently
Add command-field to CrushError
Add source field to CrushError
Make error printing display source of error


Done:
Fix all expects calls that aren't impossible, and propagate the errors
Display errors
Propagate runtime errors
one command per file
make filter actually useful
implement globs
make filter support globs
proper lexer and parser
implement file globs
make ls support globs
implement sort command
basic keyboard handling
implement find command
implement variables
implement set command
implement cell type File
make ls/find output File cells instead of strings
make nice presentation of File cells
implement Stream<Row> cell type
implement command substitution
implement group command
one command per thread
implement count command
implement head command
implement tail command
Implement matching operators, =~ and !~
make filter support globs
implement select command
implement enumerate command
implement single row cell type
implement regexps
make filter support regexps
implement csv command
implement cast command for cell type conversion
Implement ps command
implement unset command
Rename filter to where
implement reverse command
List cell types
List literals
List subscripting
Implement for command for {ls} `{echo $file}
Switch over to new list syntax
implement sum command
Start putting commands into namespaces
fields and variables should support dot notation
add support for using namespace objects as actual namespaces
Implement list.push
Implement list.pop
Implement boolean cell type
Implement boolean literals. Perhaps use ?{true} and ?{false}... Pretty ugly.
Implement namespace cell type
Implement dict cell type
implement env command
Missing type check on list literals, e.g. let foo=[1 horse]
Add map/rows/output subscripting
Add checks so we don't try to hash on unhashable types in either dict or join
Add type checks in where command
add and/or to where command
take-command for reading N (defaults to 1) lines from an output in a variable variable
Implement zip command to combine two streams
Implement if command if {stat foo.txt is_file} {} else {}
Any cell can be the output of a command
Rename cell -> value
Rename output -> stream
Rename row -> struct
Think through input/output types of join
Add uniq command
Implement http command
Binary blob type
The bin command interprets files as a single binary blob.
Head takes on the role of take command
type.of command that outputs type of input
Create new type Type
